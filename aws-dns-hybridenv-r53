## AWS Route 53 Hybrid DNS Resolution Architecture

### 1. Basic Hybrid DNS with Route 53 Resolver Endpoints (IPv4)

```
AWS Cloud Region
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                             â”‚
â”‚  â”Œâ”€ VPC (10.0.0.0/16) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€ Availability Zone A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€ Availability Zone B â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚
â”‚  â”‚  â”‚                                    â”‚    â”‚                                    â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”Œâ”€ Workload Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€ Workload Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚    10.0.0.0/24                 â”‚ â”‚    â”‚ â”‚    10.0.1.0/24                 â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚                                â”‚ â”‚    â”‚ â”‚                                â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance   â•­â”€[1]â”€â•®    â”‚ â”‚    â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance             â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚                      â”‚DNS â”‚    â”‚ â”‚    â”‚ â”‚                                â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ Queries corp.internalâ•°â”€â”€â”€â”€â”€â•¯   â”‚ â”‚    â”‚ â”‚                                â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚                                    â”‚    â”‚                                    â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”Œâ”€ Endpoint Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€ Endpoint Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚    10.0.2.0/28                 â”‚ â”‚    â”‚ â”‚    10.0.2.16/28                â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚                                â”‚ â”‚    â”‚ â”‚                                â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ â•­â”€[3]â”€â•®  â•­â”€[4]â”€â•®                â”‚ â”‚    â”‚ â”‚ â•­â”€[3]â”€â•®  â•­â”€[4]â”€â•®                â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ â”‚ IN  â”‚  â”‚OUT â”‚ Inbound        â”‚ â”‚    â”‚ â”‚ â”‚ IN  â”‚  â”‚OUT â”‚ Inbound        â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ â”‚     â”‚  â”‚    â”‚ Endpoint       â”‚ â”‚    â”‚ â”‚ â”‚     â”‚  â”‚    â”‚ Endpoint       â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ â”‚10.0.â”‚  â”‚    â”‚ 10.0.0.2       â”‚ â”‚    â”‚ â”‚ â”‚     â”‚  â”‚    â”‚                â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ â”‚ 0.2 â”‚  â”‚    â”‚                â”‚ â”‚    â”‚ â”‚ â”‚     â”‚  â”‚    â”‚                â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ â•°â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”¬â”€â•¯ Outbound        â”‚ â”‚    â”‚ â”‚ â•°â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â•¯ Outbound       â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚            â”‚   Endpoint        â”‚ â”‚    â”‚ â”‚                  Endpoint       â”‚ â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚  â”‚                 â”‚                                                                                      â”‚  â”‚
â”‚  â”‚ â”Œâ”€ Route 53 Resolver â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â”‚ â•­â”€[2]â”€â•®                                                                                              â”‚  â”‚
â”‚  â”‚ â”‚ â”‚R53  â”‚ Forwarding Rule: corp.internal â†’ 172.16.0.2                                                 â”‚  â”‚
â”‚  â”‚ â”‚ â”‚RSLV â”‚                                                                                              â”‚  â”‚
â”‚  â”‚ â”‚ â•°â”€â”€â”€â”€â”€â•¯                                                                                              â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                 â”‚                                                                                      â”‚  â”‚
â”‚  â”‚ â”Œâ”€ Private Hosted Zone (PHZ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â”‚ aws.example100.internal                                                                              â”‚  â”‚
â”‚  â”‚ â”‚ â•­â”€[10]â”€â•®                                                                                             â”‚  â”‚
â”‚  â”‚ â”‚ â”‚ PHZ   â”‚ VPC Association                                                                            â”‚  â”‚
â”‚  â”‚ â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â•¯                                                                                            â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                    â”‚                                                                                        â”‚
â”‚     â•­â”€[5]â”€â•®         â”‚                                                                                        â”‚
â”‚     â”‚VPG  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                        â”‚
â”‚     â•°â”€â”€â”€â”€â”€â•¯ Virtual Private Gateway                                                                          â”‚
â”‚                    â”‚                                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ AWS Direct Connect              â”‚
       â”‚ OR                              â”‚
       â”‚ AWS Site-to-Site VPN            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Corporate Data Center (172.16.0.0/16)                                                                     â”‚
â”‚                    â”‚                                                                                      â”‚
â”‚    â•­â”€[6]â”€â•®          â”‚              â•­â”€[7]â”€â•®        â•­â”€[8]â”€â•®        â•­â”€[9]â”€â•®                                 â”‚
â”‚    â”‚CGW  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚DNS  â”‚        â”‚CLT  â”‚        â”‚CLT  â”‚                                 â”‚
â”‚    â•°â”€â”€â”€â”€â”€â•¯ Customer Gateway        â”‚RSLV â”‚        â”‚     â”‚        â”‚     â”‚                                 â”‚
â”‚                                    â”‚     â”‚        â”‚172. â”‚        â”‚Quer-â”‚                                 â”‚
â”‚  DNS Resolver: 172.16.0.2          â”‚172. â”‚        â”‚16.0 â”‚        â”‚ies  â”‚                                 â”‚
â”‚  Resolves corp.internal domains    â”‚16.0 â”‚        â”‚.x   â”‚        â”‚aws. â”‚                                 â”‚
â”‚                                    â”‚.2   â”‚        â”‚     â”‚        â”‚ex100â”‚                                 â”‚
â”‚  Forwards aws.example100.internal â†’ â•°â”€â”€â”€â”€â”€â•¯        â•°â”€â”€â”€â”€â”€â•¯        â•°â”€â”€â”€â”€â”€â•¯                                 â”‚
â”‚  Route 53 Inbound Endpoint                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Traffic Flow:
â•­â”€ Outbound (AWS â†’ On-Premises) â”€â•®    â•­â”€ Inbound (On-Premises â†’ AWS) â”€â•®
â”‚ [1] EC2 queries corp.internal   â”‚    â”‚ [6] Client queries aws.ex100   â”‚
â”‚ [2] Route 53 Resolver forwards  â”‚    â”‚ [7] DNS Resolver forwards       â”‚
â”‚ [3] Outbound Endpoint sends     â”‚    â”‚ [8] Inbound Endpoint receives   â”‚
â”‚ [4] Query via VPN/DirectConnect â”‚    â”‚ [9] Route 53 resolves via PHZ   â”‚
â”‚ [5] Corp DNS resolves domain    â”‚    â”‚ [10] Returns AWS internal IP    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

### 2. Multi-Account Hybrid DNS with Route 53 Profiles

```
AWS Multi-Account Architecture
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                             â”‚
â”‚ â”Œâ”€ AWS Account A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ AWS Shared Services Account â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                      â”‚  â”‚                                                               â”‚ â”‚
â”‚ â”‚ â”Œâ”€ Spoke VPC A (10.0.0.0/16) â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€ Shared Services VPC (10.2.0.0/16) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚ â”‚                                  â”‚ â”‚  â”‚ â”‚                                                         â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€ Workload Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚ â”‚ â”Œâ”€ Endpoint Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â”‚                              â”‚ â”‚ â”‚  â”‚ â”‚ â”‚                                               â”‚   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance            â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â•­â”€[2]â”€â•®  â•­â”€[2]â”€â•®  Route 53 Resolver          â”‚   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â”‚       â•­â”€[3]â”€â•®                 â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚ IN  â”‚  â”‚OUT â”‚  Endpoints                  â”‚   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â”‚       â”‚DNS â”‚ Queries domains  â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚     â”‚  â”‚    â”‚                             â”‚   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â”‚       â•°â”€â”€â”€â”€â”€â•¯                 â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â•°â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â•¯                             â”‚   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚                                  â”‚ â”‚  â”‚ â”‚                                                     â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€ TGW/CWAN Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚ â”‚ â”Œâ”€ TGW/CWAN Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â”‚                              â”‚ â”‚ â”‚  â”‚ â”‚ â”‚                                               â”‚   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ ğŸŒ TGW/CWAN ENI              â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ ğŸŒ TGW/CWAN ENI                               â”‚   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â”‚                                      â”‚  â”‚                                                           â”‚ â”‚
â”‚ â”‚ â”Œâ”€ Private Hosted Zone â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€ Route 53 Forwarding Rule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚ â”‚ aws.example100.internal          â”‚ â”‚  â”‚ â”‚ Domain: corp.internal                            â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â•­â”€[4]â”€â•®                          â”‚ â”‚  â”‚ â”‚ Type: Forward                                    â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â”‚PHZ-Aâ”‚                          â”‚ â”‚  â”‚ â”‚ Target: 2001:db8:5678::abcd                     â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â•°â”€â”€â”€â”€â”€â•¯                          â”‚ â”‚  â”‚ â”‚ Outbound Endpoint: rslvr-out-123456zyxcba       â”‚   â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                                       â”‚
â”‚ â”Œâ”€ AWS Account B â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                              â”‚
â”‚ â”‚                                      â”‚  â”Œâ”€ Route 53 Profile Management â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â”Œâ”€ Spoke VPC B (10.1.0.0/16) â”€â”€â”€â”€â”€â”€â” â”‚  â”‚                                                       â”‚   â”‚
â”‚ â”‚ â”‚                                  â”‚ â”‚  â”‚ â•­â”€[1]â”€â•®    Route 53 Profile (Shared Services)        â”‚   â”‚
â”‚ â”‚ â”‚ â”Œâ”€ Workload Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚ â”‚R53  â”‚    â€¢ Created in Shared Services Account      â”‚   â”‚
â”‚ â”‚ â”‚ â”‚                              â”‚ â”‚ â”‚  â”‚ â”‚PROF â”‚    â€¢ Shared via AWS RAM                       â”‚   â”‚
â”‚ â”‚ â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance            â”‚ â”‚ â”‚  â”‚ â•°â”€â”€â”€â”€â”€â•¯    â€¢ Associated with all VPCs               â”‚   â”‚
â”‚ â”‚ â”‚ â”‚                              â”‚ â”‚ â”‚  â”‚             â€¢ Admin permissions granted              â”‚   â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚                                                       â”‚   â”‚
â”‚ â”‚ â”‚                                  â”‚ â”‚  â”‚ Profile Associations:                                 â”‚   â”‚
â”‚ â”‚ â”‚ â”Œâ”€ TGW/CWAN Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚ â€¢ VPC A â†’ PHZ aws.example100.internal                â”‚   â”‚
â”‚ â”‚ â”‚ â”‚ ğŸŒ TGW/CWAN ENI              â”‚ â”‚ â”‚  â”‚ â€¢ VPC B â†’ PHZ aws.example200.internal                â”‚   â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚ â€¢ Shared Services VPC â†’ Forwarding Rules             â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”‚                                      â”‚                                                              â”‚
â”‚ â”‚ â”Œâ”€ Private Hosted Zone â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”Œâ”€ AWS Transit Gateway / AWS Cloud WAN â”€â”€â”€â”€â”€â”      â”‚
â”‚ â”‚ â”‚ aws.example200.internal          â”‚ â”‚         â”‚                                           â”‚      â”‚
â”‚ â”‚ â”‚ â•­â”€[4]â”€â•®                          â”‚ â”‚         â”‚ â•­â”€[5]â”€â•®  Connects all VPCs               â”‚      â”‚
â”‚ â”‚ â”‚ â”‚PHZ-Bâ”‚                          â”‚ â”‚         â”‚ â”‚TGW/ â”‚  Route tables configured        â”‚      â”‚
â”‚ â”‚ â”‚ â•°â”€â”€â”€â”€â”€â•¯                          â”‚ â”‚         â”‚ â”‚CWAN â”‚  for DNS traffic               â”‚      â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚ â•°â”€â”€â”€â”€â”€â•¯                                 â”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ AWS Direct Connect                            â”‚
                    â”‚ Transit VIF                                   â”‚
                    â”‚ Direct Connect Gateway                        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Corporate Data Center                     â”‚                                                           â”‚
â”‚ (172.16.0.0/16, 2001:db8:5678::/56)     â”‚                                                           â”‚
â”‚                                           â”‚                                                           â”‚
â”‚  â•­â”€[6]â”€â•®                                 â”‚              â•­â”€[7]â”€â•®                                      â”‚
â”‚  â”‚CGW  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚DNS  â”‚ DNS Resolver                        â”‚
â”‚  â•°â”€â”€â”€â”€â”€â•¯ Customer Gateway                                â”‚RSLV â”‚ â€¢ Resolves corp.internal domains   â”‚
â”‚                                                          â”‚     â”‚ â€¢ Forwards aws.exampleXXX.internal â”‚
â”‚  â•­â”€[8]â”€â•®  Client queries aws.example100.internal        â•°â”€â”€â”€â”€â”€â•¯   to Route 53 Inbound Endpoints    â”‚
â”‚  â”‚CLT  â”‚  and aws.example200.internal                                                                 â”‚
â”‚  â•°â”€â”€â”€â”€â”€â•¯                                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DNS Resolution Flow:
[1] Route 53 Profiles centrally manage DNS configuration across accounts
[2] Inbound/Outbound Endpoints handle hybrid DNS resolution  
[3] EC2 instances query Route 53 Resolver in their VPC
[4] Private Hosted Zones provide internal AWS domain resolution
[5] Transit Gateway/Cloud WAN connects VPCs for DNS traffic
[6] Customer Gateway connects to AWS over hybrid connection
[7] Corporate DNS Resolver handles on-premises domains
[8] Corporate clients query AWS internal domains
```

### 3. IPv6 Hybrid DNS with DNS64/NAT64

```
AWS IPv6-Only Hybrid DNS Architecture
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VPC (10.0.0.0/16 + 2001:db8:1234:1a00::/56)                                                               â”‚
â”‚                                                                                                             â”‚
â”‚ â”Œâ”€ Availability Zone A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                                                                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€ Workload Subnet (IPv6-only) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ 2001:db8:1234:1a00::/64                                                                             â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                                                                                     â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance (IPv6-only)                                                                     â”‚ â”‚ â”‚
â”‚ â”‚ â”‚       2001:db8:1234:1a00::abc                                                                       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚       â•­â”€[1]â”€â•®                                                                                       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚       â”‚DNS â”‚ AAAA Query: app.corp.internal                                                         â”‚ â”‚ â”‚
â”‚ â”‚ â”‚       â•°â”€â”€â”€â”€â”€â•¯                                                                                       â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                                                                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€ Endpoint Subnet (Dual-stack) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ 10.0.0.0/28 + 2001:db8:1234:1a01::/64                                                              â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                                                                                     â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â•­â”€[3]â”€â•®  â•­â”€[4]â”€â•®                                 â•­â”€[5]â”€â•®                                            â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ IN  â”‚  â”‚OUT â”‚ Route 53 Resolver Endpoints     â”‚NAT64â”‚ Private NAT Gateway                       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚     â”‚  â”‚    â”‚ (IPv4: 10.0.0.2)                â”‚     â”‚ (DNS64 enabled)                           â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â•°â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”¤ (IPv6: fd00:ec2::253)           â•°â”€â”€â”€â”€â”€â•¯                                            â”‚ â”‚ â”‚
â”‚ â”‚ â”‚               â”‚                                                                                     â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                   â”‚                                                                                           â”‚
â”‚ â”Œâ”€ Route 53 Resolver â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â•­â”€[2]â”€â•®                                                                                                  â”‚  â”‚
â”‚ â”‚ â”‚R53  â”‚ Forwarding Rule: corp.internal â†’ 172.16.0.2                                                     â”‚  â”‚
â”‚ â”‚ â”‚RSLV â”‚ DNS64 Synthesis: IPv4 â†’ IPv6 (64:ff9b::/96 + IPv4)                                             â”‚  â”‚
â”‚ â”‚ â•°â”€â”€â”€â”€â”€â•¯                                                                                                  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚                   â”‚                                                                                           â”‚
â”‚     â•­â”€[6]â”€â•®        â”‚                                                                                           â”‚
â”‚     â”‚VPG  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                           â”‚
â”‚     â•°â”€â”€â”€â”€â”€â•¯ Virtual Private Gateway                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ AWS Direct Connect              â”‚
    â”‚ OR                              â”‚
    â”‚ AWS Site-to-Site VPN            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Corporate Data Center (172.16.0.0/16)                                                                      â”‚
â”‚                 â”‚                                                                                           â”‚
â”‚   â•­â”€[7]â”€â•®        â”‚              â•­â”€[8]â”€â•®                    â•­â”€[9]â”€â•®                                           â”‚
â”‚   â”‚CGW  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚DNS  â”‚                    â”‚SRV  â”‚ IPv4 Server                              â”‚
â”‚   â•°â”€â”€â”€â”€â”€â•¯ Customer Gateway      â”‚RSLV â”‚                    â”‚     â”‚ 172.16.0.10                              â”‚
â”‚                                 â”‚     â”‚ DNS Resolver       â”‚172. â”‚                                          â”‚
â”‚   Resolves corp.internal        â”‚172. â”‚ Returns IPv4       â”‚16.0 â”‚ â•­â”€[10]â”€â•®                                 â”‚
â”‚   domains to IPv4 addresses     â”‚16.0 â”‚ address for        â”‚.10  â”‚ â”‚CONN â”‚ Receives NAT64                   â”‚
â”‚                                 â”‚.2   â”‚ app.corp.internal  â”‚     â”‚ â”‚     â”‚ translated traffic               â”‚
â”‚                                 â•°â”€â”€â”€â”€â”€â•¯                    â•°â”€â”€â”€â”€â”€â•¯ â•°â”€â”€â”€â”€â”€â•¯                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

IPv6 DNS64/NAT64 Flow:
â•­â”€ DNS Resolution â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®    â•­â”€ Traffic Flow â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ [1] EC2 queries app.corp.internal (AAAA)    â”‚    â”‚ [6] Route table sends traffic to NAT64  â”‚
â”‚ [2] Route 53 forwards to corp DNS resolver  â”‚    â”‚ [7] NAT64 translates IPv6â†’IPv4           â”‚
â”‚ [3] Outbound Endpoint sends via VPN/DX      â”‚    â”‚ [8] Traffic reaches IPv4 server          â”‚
â”‚ [4] Corp DNS returns IPv4 address           â”‚    â”‚ [9] Response follows reverse path        â”‚
â”‚ [5] DNS64 synthesizes IPv6: 64:ff9b::ac10:a â”‚    â”‚ [10] NAT64 translates IPv4â†’IPv6 response â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Key IPv6 Features:
â€¢ DNS64: Synthesizes AAAA records from A records using 64:ff9b::/96 prefix
â€¢ NAT64: Translates IPv6 traffic to IPv4 for legacy on-premises systems  
â€¢ IPv6-only subnets: Reduces IPv4 address usage in AWS
â€¢ Dual-stack endpoints: Support both IPv4 and IPv6 for hybrid connectivity
```

### Key Architecture Components

| Component | Purpose | Notes |
|-----------|---------|-------|
| **Route 53 Resolver** | Central DNS service in VPC | Handles queries from EC2 instances |
| **Inbound Endpoint** | Receives DNS queries from on-premises | Allows corp to query AWS domains |
| **Outbound Endpoint** | Sends DNS queries to on-premises | Allows AWS to query corp domains |
| **Forwarding Rules** | Define domain routing | corp.internal â†’ on-premises DNS |
| **Private Hosted Zones** | AWS internal domains | aws.example100.internal |
| **Route 53 Profiles** | Multi-account DNS management | Centralized configuration sharing |
| **DNS64/NAT64** | IPv6-only to IPv4 translation | Enables IPv6-only workloads |

### Use Cases
- **Hybrid DNS**: Seamless name resolution between AWS and on-premises
- **Multi-account**: Centralized DNS management across AWS accounts  
- **IPv6 migration**: Gradual transition to IPv6-only infrastructure
- **Service discovery**: Internal application service resolution
