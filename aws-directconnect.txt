## AWS Direct Connect Traffic Encryption Options

### 1. AWS Site-to-Site VPN to Amazon VPC (Public VIF)

```
Corporate Network (192.168.0.0/16)                         AWS Region
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚                    â”‚                                                             â”‚
â”‚  [ğŸ‘¤] User                          â”‚                    â”‚  â”Œâ”€ VPC (10.0.0.0/16) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                     â”‚                    â”‚  â”‚                                                       â”‚   â”‚
â”‚  [ğŸ–¥ï¸ ] Server                       â”‚                    â”‚  â”‚  â”Œâ”€ Availability Zone A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚                                                 â”‚   â”‚   â”‚
â”‚       â•­â”€[A]â”€â•®                       â”‚                    â”‚  â”‚  â”‚ â”Œâ”€ Workload Subnet 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚   â”‚
â”‚       â”‚CGW  â”‚ Customer Gateway       â”‚                    â”‚  â”‚  â”‚ â”‚    10.0.0.0/24                           â”‚ â”‚   â”‚   â”‚
â”‚       â”‚     â”‚ â€¢ Routes to VPC        â”‚                    â”‚  â”‚  â”‚ â”‚                                         â”‚ â”‚   â”‚   â”‚
â”‚       â”‚     â”‚ â€¢ IPSec encryption     â”‚                    â”‚  â”‚  â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance     â•­â”€[E]â”€â•®          â”‚ â”‚   â”‚   â”‚
â”‚       â•°â”€â”€â”€â”€â”€â•¯                       â”‚                    â”‚  â”‚  â”‚ â”‚                         â”‚EC2 â”‚          â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”‚ Route Table:            â•°â”€â”€â”€â”€â”€â•¯          â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”‚ 10.0.0.0/16 â†’ local                      â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”‚ 192.168.0.0/16 â†’ vgw-id                 â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚                                                       â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”Œâ”€ Availability Zone B â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚                                                 â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”Œâ”€ Workload Subnet 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”‚    10.0.1.0/24                           â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”‚                                         â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance                      â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”‚                                         â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”‚ Route Table:                            â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”‚ 10.0.0.0/16 â†’ local                     â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â”‚ 192.168.0.0/16 â†’ vgw-id                â”‚ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚                                                       â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â•­â”€[D]â”€â•®                                            â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚VGW  â”‚ Virtual Private Gateway                    â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚     â”‚ â€¢ VPN Endpoints (Public IPs)               â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â”‚     â”‚ â€¢ IPSec Termination                       â”‚   â”‚
â”‚                                     â”‚                    â”‚  â”‚  â•°â”€â”€â”€â”€â”€â•¯                                            â”‚   â”‚
â”‚                                     â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                                                      â–²
              â”‚ â•­â”€[B]â”€â•®                                                               â”‚ â•­â”€[C]â”€â•®
              â””â”€â”¤DX   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤VPN  â”‚
                â”‚PubVIFâ”‚ Direct Connect Public VIF                                    â”‚     â”‚
                â•°â”€â”€â”€â”€â”€â•¯                                                               â•°â”€â”€â”€â”€â”€â•¯
                  â”‚                                                                     
                  â”‚                                                AWS Site-to-Site VPN
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      (IPSec Encrypted)
â”‚ AWS Direct Connect Location                               â”‚
â”‚                 â”‚                                         â”‚
â”‚  â•­â”€[1]â”€â•®        â”‚        â•­â”€[2]â”€â•®                          â”‚
â”‚  â”‚AWS  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤CUST â”‚ Customer/Partner Device  â”‚
â”‚  â”‚DEV  â”‚ Cross-Connect    â”‚DEV  â”‚                          â”‚
â”‚  â•°â”€â”€â”€â”€â”€â•¯        â”‚        â•°â”€â”€â”€â”€â”€â•¯                          â”‚
â”‚                 â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
     Direct Connect Connection

Traffic Flow:
[A] User â†’ CGW: Route to 10.0.0.x
[B] CGW â†’ DX Public VIF: Encrypted IPSec packets to VPN endpoint
[C] DX â†’ VPN: Reach VPN endpoint public IP
[D] VPN â†’ VGW: Decrypt and route to VPC
[E] VGW â†’ EC2: Route to target instance

Steps:
[1] Create Direct Connect connection
[2] Create Direct Connect Public VIF  
[3] Create Site-to-Site VPN to VGW
[4] Configure BGP on Public VIF
[5] Configure IPSec on Customer Gateway
```

### 2. AWS Site-to-Site VPN to Transit Gateway (Public VIF)

```
Corporate Network (192.168.0.0/16)                         AWS Region
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚                    â”‚                                                             â”‚
â”‚  [ğŸ‘¤] User                          â”‚                    â”‚ â”Œâ”€ Spoke VPC A (10.0.0.0/16) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                     â”‚                    â”‚ â”‚                                                           â”‚ â”‚
â”‚  [ğŸ–¥ï¸ ] Server                       â”‚                    â”‚ â”‚  â”Œâ”€ AZ A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚                                                   â”‚   â”‚ â”‚
â”‚       â•­â”€[A]â”€â•®                       â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Transit GW Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚       â”‚CGW  â”‚ Customer Gateway       â”‚                    â”‚ â”‚  â”‚ â”‚    10.0.0.0/24                               â”‚ â”‚   â”‚ â”‚
â”‚       â”‚     â”‚ â€¢ Multi-VPC routing    â”‚                    â”‚ â”‚  â”‚ â”‚ ğŸŒ ENI                                       â”‚ â”‚   â”‚ â”‚
â”‚       â”‚     â”‚ â€¢ IPSec to TGW         â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚       â•°â”€â”€â”€â”€â”€â•¯                       â”‚                    â”‚ â”‚  â”‚                                                   â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Workload Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚    10.0.1.0/24                              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance     â•­â”€[F]â”€â•®              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚                         â”‚EC2Aâ”‚              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ Route: 0.0.0.0/0 â†’ tgw â•°â”€â”€â”€â”€â”€â•¯              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚                    â”‚                                    â”‚                     â”‚
â”‚                                     â”‚                    â”‚                                    â”‚ VPC Association     â”‚
â”‚                                     â”‚                    â”‚                                    â–¼                     â”‚
â”‚                                     â”‚                    â”‚ â”Œâ”€ AWS Transit Gateway â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                     â”‚                    â”‚ â”‚                                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•­â”€[D]â”€â•®   VPN Route Table:                          â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚TGW  â”‚   â€¢ 10.0.0.0/24 â†’ Spoke VPC A              â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚     â”‚   â€¢ 10.1.0.0/24 â†’ Spoke VPC B              â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•°â”€â”€â”€â”€â”€â•¯                                             â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚                                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•­â”€[E]â”€â•®   Spoke Route Table:                        â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚VPN  â”‚   â€¢ 192.168.0.0/16 â†’ S2S VPN               â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ATT  â”‚                                             â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•°â”€â”€â”€â”€â”€â•¯                                             â”‚ â”‚
â”‚                                     â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚                    â”‚                                    â”‚                     â”‚
â”‚                                     â”‚                    â”‚                                    â”‚ VPC Association     â”‚
â”‚                                     â”‚                    â”‚                                    â–¼                     â”‚
â”‚                                     â”‚                    â”‚ â”Œâ”€ Spoke VPC B (10.1.0.0/16) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                     â”‚                    â”‚ â”‚                                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”Œâ”€ AZ A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚                                               â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Transit GW Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚    10.1.0.0/24                         â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ ğŸŒ ENI                                 â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚                                               â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Workload Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚    10.1.1.0/24                        â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance                    â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ Route: 0.0.0.0/0 â†’ tgw               â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                                                      â–²
              â”‚ â•­â”€[B]â”€â•®                                                               â”‚ â•­â”€[C]â”€â•®
              â””â”€â”¤DX   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤VPN  â”‚
                â”‚PubVIFâ”‚ Direct Connect Public VIF                                    â”‚     â”‚
                â•°â”€â”€â”€â”€â”€â•¯                                                               â•°â”€â”€â”€â”€â”€â•¯
                  â”‚                                                                     
                  â”‚                                                AWS Site-to-Site VPN
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      (IPSec Encrypted)
â”‚ AWS Direct Connect Location                               â”‚      to Transit Gateway
â”‚                 â”‚                                         â”‚
â”‚  â•­â”€[1]â”€â•®        â”‚        â•­â”€[2]â”€â•®                          â”‚
â”‚  â”‚AWS  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤CUST â”‚ Customer/Partner Device  â”‚
â”‚  â”‚DEV  â”‚ Cross-Connect    â”‚DEV  â”‚                          â”‚
â”‚  â•°â”€â”€â”€â”€â”€â•¯        â”‚        â•°â”€â”€â”€â”€â”€â•¯                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Traffic Flow:
[A] User â†’ CGW: Route to spoke VPCs
[B] CGW â†’ DX Public VIF: Encrypted IPSec to TGW VPN endpoint
[C] DX â†’ VPN: Reach TGW VPN endpoint public IP
[D] VPN â†’ TGW: Decrypt and route via TGW
[E] TGW â†’ Spoke VPCs: Forward to target VPC
[F] VPC â†’ EC2: Route to target instance
```

### 3. AWS Site-to-Site VPN Private IP VPN to Transit Gateway

```
Corporate Data Center (192.168.0.0/16)                     AWS Region
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚                    â”‚                                                             â”‚
â”‚  [ğŸ‘¤] User                          â”‚                    â”‚ â”Œâ”€ Spoke VPC A (10.0.0.0/16) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                     â”‚                    â”‚ â”‚                                                           â”‚ â”‚
â”‚  [ğŸ–¥ï¸ ] Server                       â”‚                    â”‚ â”‚  â”Œâ”€ AZ A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚                                                   â”‚   â”‚ â”‚
â”‚       â•­â”€[A]â”€â•®                       â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Transit GW Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚       â”‚CGW  â”‚ Customer Gateway       â”‚                    â”‚ â”‚  â”‚ â”‚    10.0.1.0/28                               â”‚ â”‚   â”‚ â”‚
â”‚       â”‚     â”‚ â€¢ Private IP VPN       â”‚                    â”‚ â”‚  â”‚ â”‚ ğŸŒ ENI                                       â”‚ â”‚   â”‚ â”‚
â”‚       â”‚     â”‚ â€¢ Enhanced security    â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚       â•°â”€â”€â”€â”€â”€â•¯                       â”‚                    â”‚ â”‚  â”‚                                                   â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Workload Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚    10.0.0.0/24                              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance     â•­â”€[D]â”€â•®              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚                         â”‚EC2Aâ”‚              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ Route: 0.0.0.0/0 â†’ tgw â•°â”€â”€â”€â”€â”€â•¯              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚                    â”‚                                    â”‚                     â”‚
â”‚                                     â”‚                    â”‚                                    â”‚ VPC Association     â”‚
â”‚                                     â”‚                    â”‚                                    â–¼                     â”‚
â”‚                                     â”‚                    â”‚ â”Œâ”€ AWS Transit Gateway â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                     â”‚                    â”‚ â”‚                                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•­â”€[C]â”€â•®   VPN Route Table:                          â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚TGW  â”‚   â€¢ 10.0.0.0/16 â†’ Spoke VPC A              â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚     â”‚   â€¢ 10.1.0.0/16 â†’ Spoke VPC B              â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•°â”€â”€â”€â”€â”€â•¯                                             â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚              â–²                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚              â”‚ VPN Attachment                        â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚              â”‚                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ AWS Site-to-Site VPN (Private IP)             â”‚ â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â€¢ Uses Direct Connect Gateway as transport   â”‚ â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â€¢ Private IP addresses for VPN endpoints     â”‚ â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â€¢ Enhanced security and network privacy      â”‚ â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚ â”‚
â”‚                                     â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚                    â”‚                                    â”‚                     â”‚
â”‚                                     â”‚                    â”‚                                    â”‚ VPC Association     â”‚
â”‚                                     â”‚                    â”‚                                    â–¼                     â”‚
â”‚                                     â”‚                    â”‚ â”Œâ”€ Spoke VPC B (10.1.0.0/16) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                     â”‚                    â”‚ â”‚                                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”Œâ”€ AZ A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚                                               â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Transit GW Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚    10.1.1.0/28                         â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ ğŸŒ ENI                                 â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚                                               â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Workload Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚    10.1.0.0/24                        â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance                    â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ Route: 0.0.0.0/0 â†’ tgw               â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                                                      â–²
              â”‚ â•­â”€[B]â”€â•®                                                               â”‚ Private IP VPN
              â””â”€â”¤DX   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ over Transit VIF
                â”‚TrVIFâ”‚ Direct Connect Transit VIF                                   â”‚ 
                â•°â”€â”€â”€â”€â”€â•¯                                                               â”‚
                  â”‚                                 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
                  â”‚                                 â”‚ Direct Connect Gateway
                  â”‚                                 â”‚ â€¢ Gateway association with TGW
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS Direct Connect Location           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                          â”‚
â”‚                 â”‚                     â”‚DX Gateway       â”‚                          â”‚
â”‚  â•­â”€[1]â”€â•®        â”‚        â•­â”€[2]â”€â•®      â”‚â€¢ Private routingâ”‚                          â”‚
â”‚  â”‚AWS  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤CUST â”‚      â”‚â€¢ VPN transport  â”‚                          â”‚
â”‚  â”‚DEV  â”‚ Cross-Connect    â”‚DEV  â”‚      â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                          â”‚
â”‚  â•°â”€â”€â”€â”€â”€â•¯        â”‚        â•°â”€â”€â”€â”€â”€â•¯                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
     Direct Connect Connection (Transit VIF + DX Gateway)

Traffic Flow:
[A] User â†’ CGW: Route to spoke VPCs via Private IP VPN
[B] CGW â†’ DX Transit VIF: Private IP VPN over Direct Connect
[C] DX Gateway â†’ TGW: Route via VPN attachment  
[D] TGW â†’ Spoke VPC: Forward to target VPC and EC2 instance

Key Features:
â€¢ Private IP addresses for VPN endpoints
â€¢ Uses Direct Connect Gateway and Transit VIF as transport
â€¢ Enhanced security - no public IP exposure
â€¢ Native Direct Connect routing integration
```

### 4. MACsec Security in AWS Direct Connect

```
Corporate Network (192.168.0.0/16)                         AWS Region
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚                    â”‚                                                             â”‚
â”‚  [ğŸ‘¤] User                          â”‚                    â”‚ â”Œâ”€ Spoke VPC A (10.0.0.0/16) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                     â”‚                    â”‚ â”‚                                                           â”‚ â”‚
â”‚  [ğŸ–¥ï¸ ] Server                       â”‚                    â”‚ â”‚  â”Œâ”€ AZ A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚                                                   â”‚   â”‚ â”‚
â”‚       â•­â”€[A]â”€â•®                       â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Transit GW Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚       â”‚CGW  â”‚ Customer Gateway       â”‚                    â”‚ â”‚  â”‚ â”‚    10.0.0.0/24                               â”‚ â”‚   â”‚ â”‚
â”‚       â”‚     â”‚ â€¢ Native DX routing    â”‚                    â”‚ â”‚  â”‚ â”‚ ğŸŒ ENI                                       â”‚ â”‚   â”‚ â”‚
â”‚       â”‚     â”‚ â€¢ No VPN overhead      â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚       â•°â”€â”€â”€â”€â”€â•¯                       â”‚                    â”‚ â”‚  â”‚                                                   â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Workload Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚    10.0.1.0/24                              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ [ğŸ–¥ï¸ ] EC2 Instance     â•­â”€[D]â”€â•®              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚                         â”‚EC2Aâ”‚              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ Route: 0.0.0.0/0 â†’ tgw â•°â”€â”€â”€â”€â”€â•¯              â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚                    â”‚                                    â”‚                     â”‚
â”‚                                     â”‚                    â”‚                                    â”‚ VPC Association     â”‚
â”‚                                     â”‚                    â”‚                                    â–¼                     â”‚
â”‚                                     â”‚                    â”‚ â”Œâ”€ AWS Transit Gateway â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                     â”‚                    â”‚ â”‚                                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•­â”€[C]â”€â•®   Direct Connect Route Table:                â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚TGW  â”‚   â€¢ 10.0.0.0/24 â†’ Spoke VPC A              â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚     â”‚   â€¢ 10.1.0.0/24 â†’ Spoke VPC B              â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•°â”€â”€â”€â”€â”€â•¯                                             â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚              â–²                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚              â”‚ Gateway Association                    â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚              â”‚                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ AWS Direct Connect Gateway                    â”‚ â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â€¢ Native Layer 2/3 routing                   â”‚ â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â€¢ No VPN encapsulation overhead             â”‚ â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â€¢ MACsec encryption at wire speed           â”‚ â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚ â”‚
â”‚                                     â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚                    â”‚                                    â”‚                     â”‚
â”‚                                     â”‚                    â”‚                                    â”‚ VPC Association     â”‚
â”‚                                     â”‚                    â”‚                                    â–¼                     â”‚
â”‚                                     â”‚                    â”‚ â”Œâ”€ Spoke VPC B (10.1.0.0/16) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                     â”‚                    â”‚ â”‚                                                       â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”Œâ”€ AZ A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚                                               â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Transit GW Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚    10.1.0.0/24                         â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ ğŸŒ ENI                                 â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚                                               â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”Œâ”€ Workload Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚    10.1.1.0/24                        â”‚ â”‚   â”‚ â”‚
â”‚                                     â”‚                    â”‚ â”‚  â”‚ â”‚ [
